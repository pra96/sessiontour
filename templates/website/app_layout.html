{% load static %}
<!DOCTYPE html>
<head>
    <!-- Required tags and meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>SESSIONS | Climbing + Fitness</title>
    <link rel="shortcut icon" type="image/png" href="{% static 'images/logos/logo-art-white.jpg' %}">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.css' %}">
    <script src="{% static 'jQuery/jquery-3.6.0.js' %}"></script>
    <script src="{% static 'bootstrap/js/bootstrap.bundle.js' %}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <script type="text/javascript">
        const user = '{{ request.user }}'

        // Creates a CSRF token
        function getToken(name) {
		    let cookieValue = null;
		    if (document.cookie && document.cookie !== '') {
		        const cookies = document.cookie.split(';');
		        for (let i = 0; i < cookies.length; i++) {
		            const cookie = cookies[i].trim();
		            // Does this cookie string begin with the name we want?
		            if (cookie.substring(0, name.length + 1) === (name + '=')) {
		                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
		                break;
		            }
		        }
		    }
		    return cookieValue;
		}
		const csrftoken = getToken('csrftoken')

        // Function to create cart from cookie data
        function getCookie(name) {
            // Split cookie string and get all individual name=value pairs in an array
		    const cookieArr = document.cookie.split(";");

		    // Loop through the array elements
		    for(let i = 0; i < cookieArr.length; i++) {
		        let cookiePair = cookieArr[i].split("=");

		        /* Removing whitespace at the beginning of the cookie name
		        and compare it with the given string */
		        if(name === cookiePair[0].trim()) {
		            // Decode the cookie value and return
		            return decodeURIComponent(cookiePair[1]);
		        }
		    }
		    // Return null if not found
		    return null;
		}

		let cart = JSON.parse(getCookie('cart'))
		if (cart === null) {
			cart = {}
			console.log('Cart Created!', cart)
			document.cookie = "cart=" + JSON.stringify(cart) + ";domain=;path=/"
        }

    </script>
    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="{% static 'swiper/swiper-bundle.css' %}">
    <title>SESSIONS | Climbing + Fitness</title>
    <link rel="shortcut icon" type="image/png" href="{% static 'images/logos/logo-art-white.jpg' %}">

    <script>
        function respScreen() {
            var x = document.getElementById("my-drop-down");
            if (x.className === "drop-down col-12 col-md-6") {
                x.className += " responsive";
            } else {
                x.className = "drop-down col-12 col-md-6";
            }
        }
    </script> 
</head>
<body lang="en">
    <div class="container-fluid">
        <!--load header-->
        {% include 'website/header.html' %}

        <!--load main content-->
        <div class="wrapper">
            {% block content %}
            {% endblock %}
        </div>
        </br>
        </br>
        </br>

        <!--load footer-->
        {% include 'website/footer.html' %}
    </div>
    <!-- jQuery and Bootstrap scripts -->
    <script src="{% static 'jQuery/jquery-3.6.0.js' %}"></script>
    <script src="{% static 'bootstrap/js/bootstrap.bundle.js' %}"></script>
    <!-- Swiper JS -->
    <script src="{% static 'swiper/swiper-bundle.js' %}"></script>
    <script src="{% static 'swiper/swiper.js' %}"></script>
    <!-- Ecommerce -->
    <script type="text/javascript" src="{% static 'js/cart.js' %}"></script>
</body>
